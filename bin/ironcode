#!/bin/bash

session="ironcode"
tmux kill-session -t $session
tmux new-session -d -s $session

tmux rename-window -t 0 'Building'
tmux send-keys -t 0 'robTest' C-m
tmux send-keys -t 0 'cd ~/code/ironcub-software-ws/ && clear' C-m
tmux send-keys -t 0 'colcon build --merge-install'
tmux split-window -v
tmux select-layout even-vertical
tmux send-keys -t 1 'robTest' C-m
tmux send-keys -t 1 'cd ~/code/ironcub-software-ws/build/ironcub/ && clear' C-m
tmux send-keys -t 1 'make install -j'
tmux split-window -v
tmux select-layout even-vertical
tmux send-keys -t 2 'robTest' C-m
tmux send-keys -t 2 'cd ~/code/ironcub-software-ws/build/ironcub-flight-control/ && clear' C-m
tmux send-keys -t 2 'make install -j'
tmux split-window -v
tmux select-layout even-vertical
tmux send-keys -t 3 'robTest' C-m
tmux send-keys -t 3 'cd ~/code/ironcub-software-ws/build/element_ironcub-estimation/ && clear' C-m
tmux send-keys -t 3 'make install -j'
tmux split-window -v
tmux select-layout even-vertical
tmux send-keys -t 4 'robTest' C-m
tmux send-keys -t 4 'cd ~/code/ironcub-software-ws/build/TurbineSetupSoftware/ && clear' C-m
tmux send-keys -t 4 'make install -j'
tmux split-window -v
tmux select-layout tiled
tmux send-keys -t 5 'robTest' C-m
tmux send-keys -t 5 'cd ~/code/ironcub-software-ws/build/element_ft-nonlinear-modeling/ && clear' C-m
tmux send-keys -t 5 'make install -j'
tmux select-pane -t 0 # move cursor to the first pane

tmux new-window -t $session:1 -n 'iRonCub'
tmux send-keys -t 0 'nvim ~/code/ironcub-software-ws/src/component_ironcub/' C-m
tmux new-window -t $session:2 -n 'Control'
tmux send-keys -t 0 'nvim ~/code/ironcub-software-ws/src/element_ironcub-control/' C-m
tmux new-window -t $session:3 -n 'Estimation'
tmux send-keys -t 0 'nvim ~/code/ironcub-software-ws/src/element_ironcub-estimation/' C-m
tmux new-window -t $session:4 -n 'JetCat'
tmux send-keys -t 0 'nvim ~/code/ironcub-software-ws/src/element_jet-cat-turbines/' C-m
tmux new-window -t $session:5 -n 'FTs'
tmux send-keys -t 0 'nvim ~/code/ironcub-software-ws/src/element_ft-nonlinear-modelling/' C-m
tmux new-window -t $session:6 -n 'Terminal'

tmux attach-session -t $session:1

